# Rhyme Scoring System
* 모델에 의해 생성된 가사의 운율 향상을 위해 고안된 스코어링 시스템
* 한국어 음운규칙 기반의 '발음 유사도'에서 착안한 운율 점수 집계 방법
* 최고점은 8점, 최하점은 0점
* 각 토큰의 마지막 글자, 마지막에서 두번째 글자를 비교하여 **단위 점수**를 측정
  - 둘 중 하나의 토큰이라도 길이가 1이면 가장 마지막 글자끼리만 비교
* 각 토큰의 길이가 2글자보다 큰 경우, 단위 점수 집계 윈도우(커널)를 활용해 여러 단위 점수에 대한 가중 평균
  - (예) `다운돼있어` VS `재미없어`
   1. `있어`, `없어` 점수 측정 := s1
   2. `돼있`, `미없` 점수 측정 := s2
   3. `운돼`, `재미` 점수 측정 := s3
   4. 최종 운율 점수는 다음과 같음  
      * `S = (1*s1 + 2*s2 + 3*s3) / (1 + 2 + 3)`
## 단위 점수
### 규칙
#### 모음
* 모음이 완전히 같은 경우 Best: +5점
* 두 토큰의 모음 발음이 같은 '유사 모음 그룹'에 포함될 경우
  * 유사 모음 그룹은 2가지가 있으며, 각각 1등급, 2등급 모음 그룹으로 분류됨
    * 1등급 모음 그룹: `['ㅏ', 'ㅘ', 'ㅑ'], ['ㅓ', 'ㅕ', 'ㅝ'], ['ㅐ', 'ㅒ', 'ㅔ', 'ㅖ', 'ㅙ', 'ㅚ', 'ㅞ'], ['ㅗ', 'ㅛ'], ['ㅜ', 'ㅠ', 'ㅡ'], ['ㅟ', 'ㅢ', 'ㅣ']`
        * 1등급 모음 그룹화 기준: 발음 후 '마지막 입모양이 같은가'
    * 2등급 모음 그룹: `['ㅏ', 'ㅐ', 'ㅑ,' 'ㅒ,' 'ㅗ', 'ㅘ', 'ㅙ', 'ㅚ', 'ㅛ'], ['ㅓ', 'ㅔ', 'ㅕ', 'ㅖ', 'ㅜ', 'ㅝ', 'ㅞ', 'ㅟ', 'ㅠ', 'ㅡ', 'ㅢ', 'ㅣ']`
        * 2등급 모음 그룹화 기준: 음성 모음, 양성 모음
    * 1등급 모음 그룹 기준에 부합할 경우: +3점
    * 2등급 모음 그룹 기준에 부합할 경우: 1등급 모음 점수의 70% 가점
* 위 경우가 아닌 경우: 0점(실격)
  * 운율이 형성되지 않은 것으로 판단, 자음 평가를 하지 않고 점수 집계 종료
#### 자음
* 두 토큰이 모두 종성을 가지거나, 모두 종성을 가지고 있지 않은 경우
  * 우선 +3점
  * 두 토큰 모두 종성을 가지고 있는 경우에 한하여, '한 종성은 울림 소리에 포함되나 나머지 한 종성은 울림 소리에 포함되는 경우': -1점
* 그 외 경우: +1점

#### 최종 점수
* 마지막 글자와 그 앞글자로부터 구한 운율 점수를 가중 평균하여 집계
* 운율 특성상 마지막 글자의 통일성이 더 중요하므로, 마지막 글자의 운율 점수에 더 높은 가중치 부여
* 마지막 글자를 `L`, 그 앞 글자를 `postL`이라 할 때, 운율 점수는 다음과 같음  
    * `Rhyme Score = Score(postL)*0.25 + Score(L)*0.75`



